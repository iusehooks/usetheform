(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"1bQd":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return j})),n.d(t,"default",(function(){return h}));var a=n("mK0O"),l=n("Fcif"),o=n("+I+c"),r=(n("mXGw"),n("/FXl")),c=n("TjRS"),b=n("ZFoC"),u=n("RnGj"),p=n("Hn4R"),i=n("8xEu"),m=n("Mzd/"),s=n("oXiK");n("aD51");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={};void 0!==j&&j&&j===Object(j)&&Object.isExtensible(j)&&!j.hasOwnProperty("__filemeta")&&Object.defineProperty(j,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"docs/Collection.mdx"}});var O={_frontmatter:j},f=c.a;function h(e){var t,n,a,d,h,v,x,N,C=e.components,g=Object(o.a)(e,["components"]);return Object(r.b)(f,Object(l.a)({},O,g,{components:C,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"collection"},"Collection"),Object(r.b)("p",null,"Creates a nested piece of state within a Form. ",Object(r.b)("br",null),"\nA Collection can be of type: ",Object(r.b)("strong",{parentName:"p"},"object")," or ",Object(r.b)("strong",{parentName:"p"},"array"),"."),Object(r.b)("h2",{id:"props"},"Props"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"object")),": boolean"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Creates a collection of type ",Object(r.b)("strong",{parentName:"li"},"object"),' if "true".')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"array")),": boolean"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Creates a collection of type ",Object(r.b)("strong",{parentName:"li"},"array"),' if "true".')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"name")),": string"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A field's name in Usetheform state. ",Object(r.b)("br",null)),Object(r.b)("li",{parentName:"ul"},"If your Collection is rendered within a ",Object(r.b)("inlineCode",{parentName:"li"},"<Collection array />"),", ",Object(r.b)("strong",{parentName:"li"},"name")," is not allowed as a prop.")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"index")),": string"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"A field's index in an array Collection. ",Object(r.b)("br",null)),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"index")," is only allowed if your Collection is rendered within a ",Object(r.b)("inlineCode",{parentName:"li"},"<Collection array /> "),". ")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"touched")),": boolean"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"Default value is ",Object(r.b)("em",{parentName:"p"},"false"),". "),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"true"),": sync validation messages will be showing only when the event onBlur of any collection's field is triggered by the user action at any level of nesting.\nThe async validation messages will be showing only at form submission."),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},"false"),": validation messages (sync and async) will be showing only at form submission.")))),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),'const [status, validation] = useValidation([anyValidationFunc])\n<Collection touched object name="myObject" {...validation}>\n  <Input type="text" name="name" value="BeBo" />\n</Collection>\n{status.error && <label>{status.error}</label>}\n')),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"value")),": array | object"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Specifies the initial value of a ",Object(r.b)("em",{parentName:"li"},"Collection"),".")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"reducers")),": array | function"),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"(nextValue, prevValue, formState) => nextValue\n")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"An array whose values correspond to different reducing functions."),Object(r.b)("li",{parentName:"ul"},"Reducer functions specify how the Collection's value changes.")),Object(r.b)("h2",{id:"basic-usage"},"Basic usage"),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"  import { Form, Input, Collection } from 'usetheform'\n")),Object(r.b)(b.b,{__position:0,__code:'<Form>\n  <Collection object name="myObject">\n    <Input type="text" name="name" placeholder="First Name" value="Foo" />\n    <Input type="text" name="lastname" placeholder="Last Name" />\n    <Input type="radio" name="gender" placeholder="M" value="M" />\n    <Input type="radio" name="gender" placeholder="F" value="F" />\n    <Input type="radio" name="gender" placeholder="Other" value="Other" />\n    <Input type="checkbox" name="one" value="one" placeholder="Opt 1" />\n    <Input type="checkbox" name="two" value="two" placeholder="Opt 2" />\n  </Collection>\n  <Collection array name="myArray">\n    <Input type="number" placeholder="Enter value: 1" value="1" />\n    <Input type="number" placeholder="Enter value: 2" />\n    <Input type="number" placeholder="Enter value: 3" />\n  </Collection>\n  <Input type="file" name="file" />\n</Form>',__scope:(t={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},t.DefaultLayout=c.a,t._frontmatter=j,t),mdxType:"Playground"},Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{object:!0,name:"myObject",mdxType:"Collection"},Object(r.b)(i.a,{type:"text",name:"name",placeholder:"First Name",value:"Foo",mdxType:"Input"}),Object(r.b)(i.a,{type:"text",name:"lastname",placeholder:"Last Name",mdxType:"Input"}),Object(r.b)(i.a,{type:"radio",name:"gender",placeholder:"M",value:"M",mdxType:"Input"}),Object(r.b)(i.a,{type:"radio",name:"gender",placeholder:"F",value:"F",mdxType:"Input"}),Object(r.b)(i.a,{type:"radio",name:"gender",placeholder:"Other",value:"Other",mdxType:"Input"}),Object(r.b)(i.a,{type:"checkbox",name:"one",value:"one",placeholder:"Opt 1",mdxType:"Input"}),Object(r.b)(i.a,{type:"checkbox",name:"two",value:"two",placeholder:"Opt 2",mdxType:"Input"})),Object(r.b)(s.a,{array:!0,name:"myArray",mdxType:"Collection"},Object(r.b)(i.a,{type:"number",placeholder:"Enter value: 1",value:"1",mdxType:"Input"}),Object(r.b)(i.a,{type:"number",placeholder:"Enter value: 2",mdxType:"Input"}),Object(r.b)(i.a,{type:"number",placeholder:"Enter value: 3",mdxType:"Input"})),Object(r.b)(i.a,{type:"file",name:"file",mdxType:"Input"}))),Object(r.b)("h3",{id:"nested-collections"},"Nested Collections"),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"  import { Form, Input, Collection } from 'usetheform'\n")),Object(r.b)(b.b,{__position:1,__code:'<Form>\n  <Collection object name="myObject">\n    <Collection object name="user">\n      <Input type="text" name="name" placeholder="First Name" />\n      <Input type="text" name="lastname" placeholder="Last Name" />\n      <Collection object name="info">\n        <Input type="tel" name="tel" placeholder="Telephone" />\n        <Input type="text" name="website" placeholder="Personal Website" />\n      </Collection>\n    </Collection>\n    <Collection array name="checkboxes">\n      <Input type="checkbox" value="one" placeholder="Opt 1" />\n      <Input type="checkbox" value="two" placeholder="Opt 2" />\n    </Collection>\n  </Collection>\n</Form>',__scope:(n={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},n.DefaultLayout=c.a,n._frontmatter=j,n),mdxType:"Playground"},Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{object:!0,name:"myObject",mdxType:"Collection"},Object(r.b)(s.a,{object:!0,name:"user",mdxType:"Collection"},Object(r.b)(i.a,{type:"text",name:"name",placeholder:"First Name",mdxType:"Input"}),Object(r.b)(i.a,{type:"text",name:"lastname",placeholder:"Last Name",mdxType:"Input"}),Object(r.b)(s.a,{object:!0,name:"info",mdxType:"Collection"},Object(r.b)(i.a,{type:"tel",name:"tel",placeholder:"Telephone",mdxType:"Input"}),Object(r.b)(i.a,{type:"text",name:"website",placeholder:"Personal Website",mdxType:"Input"}))),Object(r.b)(s.a,{array:!0,name:"checkboxes",mdxType:"Collection"},Object(r.b)(i.a,{type:"checkbox",value:"one",placeholder:"Opt 1",mdxType:"Input"}),Object(r.b)(i.a,{type:"checkbox",value:"two",placeholder:"Opt 2",mdxType:"Input"}))))),Object(r.b)("h2",{id:"array-collection"},"Array Collection"),Object(r.b)("p",null,"Array Collection of Input fields with indexes handled automatically."),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),'import React from "react";\nimport { Form, Input, Collection } from "usetheform";\n')),Object(r.b)(b.b,{__position:2,__code:'<Form>\n  <Collection array name="numberList">\n    <Input label="One" type="number" placeholder="Number 1" value="1" />\n    <Input label="Two" type="number" placeholder="Number 2" value="2" />\n  </Collection>\n</Form>',__scope:(a={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},a.DefaultLayout=c.a,a._frontmatter=j,a),mdxType:"Playground"},Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{array:!0,name:"numberList",mdxType:"Collection"},Object(r.b)(i.a,{label:"One",type:"number",placeholder:"Number 1",value:"1",mdxType:"Input"}),Object(r.b)(i.a,{label:"Two",type:"number",placeholder:"Number 2",value:"2",mdxType:"Input"})))),Object(r.b)("br",null),"Array Collection of Input fields with indexes handled automatically for custom Inputs.",Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),'import React from "react";\nimport { withIndex, useField, Collection } from "usetheform";\n\nconst CustomInput = withIndex(({ type, name, value, index, ...restAttr }) => {\n  const props = useField({ type, name, value, index });\n  return <input {...restAttr} {...props}></input>;\n});\n')),Object(r.b)(b.b,{__position:4,__code:'<Form>\n  <Collection array name="numberList">\n    <CustomInput label="One" type="number" value="1" />\n    <CustomInput label="Two" type="number" value="2" />\n  </Collection>\n</Form>',__scope:(d={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},d.DefaultLayout=c.a,d._frontmatter=j,d),mdxType:"Playground"},Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{array:!0,name:"numberList",mdxType:"Collection"},Object(r.b)(m.a,{label:"One",type:"number",value:"1",mdxType:"CustomInput"}),Object(r.b)(m.a,{label:"Two",type:"number",value:"2",mdxType:"CustomInput"})))),Object(r.b)("br",null),"Array Collection of Input fields with indexes handled maunally.",Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"  import { Form, Input, Collection } from 'usetheform'\n")),Object(r.b)(b.b,{__position:6,__code:'<Form>\n  <Collection array name="numberList">\n    <Input type="number" index="0" value="1" placeholder="Number 1" />\n    <Input type="number" index="1" value="2" placeholder="Number 2" />\n  </Collection>\n</Form>',__scope:(h={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},h.DefaultLayout=c.a,h._frontmatter=j,h),mdxType:"Playground"},Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{array:!0,name:"numberList",mdxType:"Collection"},Object(r.b)(i.a,{type:"number",index:"0",value:"1",placeholder:"Number 1",mdxType:"Input"}),Object(r.b)(i.a,{type:"number",index:"1",value:"2",placeholder:"Number 2",mdxType:"Input"})))),Object(r.b)("h2",{id:"reducers"},"Reducers"),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"  import { Form, Input, Collection } from 'usetheform'\n")),Object(r.b)(b.b,{__position:7,__code:'() => {\n  const fullNameFN = nextValue => {\n    const fullName = [nextValue[\'name\'], nextValue[\'lastname\']]\n      .filter(Boolean)\n      .join(\' \')\n    const newValue = { ...nextValue, fullName }\n    return newValue\n  }\n  return (\n    <Form>\n      <Collection object name="person" reducers={fullNameFN}>\n        <Input type="text" name="name" value="foo" placeholder="First Name" />\n        <Input\n          type="text"\n          name="lastname"\n          value="pluto"\n          placeholder="Last Name"\n        />\n        <Input type="text" name="fullName" readOnly placeholder="Full Name" />\n      </Collection>\n    </Form>\n  )\n}',__scope:(v={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},v.DefaultLayout=c.a,v._frontmatter=j,v),mdxType:"Playground"},(function(){return Object(r.b)(u.a,{mdxType:"Form"},Object(r.b)(s.a,{object:!0,name:"person",reducers:function(e){var t=[e.name,e.lastname].filter(Boolean).join(" ");return y(y({},e),{},{fullName:t})},mdxType:"Collection"},Object(r.b)(i.a,{type:"text",name:"name",value:"foo",placeholder:"First Name",mdxType:"Input"}),Object(r.b)(i.a,{type:"text",name:"lastname",value:"pluto",placeholder:"Last Name",mdxType:"Input"}),Object(r.b)(i.a,{type:"text",name:"fullName",readOnly:!0,placeholder:"Full Name",mdxType:"Input"})))})),Object(r.b)("h2",{id:"validation---sync"},"Validation - Sync"),Object(r.b)("p",null,"Validation at Collection level starts only on form submission if the prop ",Object(r.b)("strong",{parentName:"p"},Object(r.b)("inlineCode",{parentName:"strong"},"touched"))," is false."),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"  import { Form, Input, Collection, useValidation } from 'usetheform'\n")),Object(r.b)(b.b,{__position:8,__code:'() => {\n  const graterThan10 = value =>\n    value && value[\'A\'] + value[\'B\'] > 10 ? undefined : \'A+B must be > 10\'\n  const [status, validation] = useValidation([graterThan10])\n  const onSubmit = state => alert(JSON.stringify(state))\n\n  return (\n    <Form onSubmit={onSubmit}>\n      <Collection object name="sum" {...validation}>\n        <Input type="number" name="A" value="1" placeholder="Number A" />\n        <Input type="number" name="B" value="2" placeholder="Number B" />\n      </Collection>\n      {status.error && <label>{status.error}</label>}\n      <button type="submit">Press to see results</button>\n    </Form>\n  )\n}',__scope:(x={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},x.DefaultLayout=c.a,x._frontmatter=j,x),mdxType:"Playground"},(function(){var e=Object(s.m)([function(e){return e&&e.A+e.B>10?void 0:"A+B must be > 10"}]),t=e[0],n=e[1];return Object(r.b)(u.a,{onSubmit:function(e){return alert(JSON.stringify(e))},mdxType:"Form"},Object(r.b)(s.a,Object(l.a)({object:!0,name:"sum"},n,{mdxType:"Collection"}),Object(r.b)(i.a,{type:"number",name:"A",value:"1",placeholder:"Number A",mdxType:"Input"}),Object(r.b)(i.a,{type:"number",name:"B",value:"2",placeholder:"Number B",mdxType:"Input"})),t.error&&Object(r.b)("label",null,t.error),Object(r.b)("button",{type:"submit"},"Press to see results"))})),Object(r.b)("h2",{id:"validation---async"},"Validation - Async"),Object(r.b)("p",null,"Async Validation for Collections is triggered on Submit event. The form submission is prevented if the validation fails.\nThis means that the onSubmit function passed as prop to the ",Object(r.b)("strong",{parentName:"p"},"Form")," component will not be invoked."),Object(r.b)("pre",null,Object(r.b)("code",Object(l.a)({parentName:"pre"},{className:"language-javascript"}),"import { useAsyncValidation, useForm } from 'usetheform'\n\nconst Submit = () => {\n  const { isValid } = useForm();\n  return (\n    <button disabled={!isValid} type=\"submit\">\n      Submit\n    </button>\n  );\n};\n\n")),Object(r.b)(b.b,{__position:9,__code:'() => {\n  const asyncTest = value =>\n    new Promise((resolve, reject) => {\n      // it could be an API call or any async operation\n      setTimeout(() => {\n        if (value.a + value.b !== 5) {\n          reject(\'Error values not allowed\')\n        } else {\n          resolve(\'Success\')\n        }\n      }, 1000)\n    })\n  const [asyncStatus, validationProps] = useAsyncValidation(asyncTest)\n  const onSubmit = state => alert(JSON.stringify(state))\n  return (\n    <Form onSubmit={onSubmit}>\n      <Collection object name="sum" {...validationProps}>\n        <Input type="number" name="a" value="1" placeholder="Number A" />\n        <Input type="number" name="b" value="2" placeholder="Number B" />\n      </Collection>\n      {asyncStatus.status === undefined && (\n        <label>Async Check Not Started Yet</label>\n      )}\n      {asyncStatus.status === \'asyncStart\' && <label>Checking...</label>}\n      {asyncStatus.status === \'asyncError\' && (\n        <label>{asyncStatus.value}</label>\n      )}\n      {asyncStatus.status === \'asyncSuccess\' && (\n        <label>{asyncStatus.value}</label>\n      )}\n      <Submit />\n    </Form>\n  )\n}',__scope:(N={props:g,DefaultLayout:c.a,Playground:b.b,Form:u.a,Submit:p.a,Input:i.a,CustomInput:m.a,Collection:s.a,useValidation:s.m,useAsyncValidation:s.h},N.DefaultLayout=c.a,N._frontmatter=j,N),mdxType:"Playground"},(function(){var e=Object(s.h)((function(e){return new Promise((function(t,n){setTimeout((function(){e.a+e.b!==5?n("Error values not allowed"):t("Success")}),1e3)}))})),t=e[0],n=e[1];return Object(r.b)(u.a,{onSubmit:function(e){return alert(JSON.stringify(e))},mdxType:"Form"},Object(r.b)(s.a,Object(l.a)({object:!0,name:"sum"},n,{mdxType:"Collection"}),Object(r.b)(i.a,{type:"number",name:"a",value:"1",placeholder:"Number A",mdxType:"Input"}),Object(r.b)(i.a,{type:"number",name:"b",value:"2",placeholder:"Number B",mdxType:"Input"})),void 0===t.status&&Object(r.b)("label",null,"Async Check Not Started Yet"),"asyncStart"===t.status&&Object(r.b)("label",null,"Checking..."),"asyncError"===t.status&&Object(r.b)("label",null,t.value),"asyncSuccess"===t.status&&Object(r.b)("label",null,t.value),Object(r.b)(p.a,{mdxType:"Submit"}))})))}void 0!==h&&h&&h===Object(h)&&Object.isExtensible(h)&&!h.hasOwnProperty("__filemeta")&&Object.defineProperty(h,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"docs/Collection.mdx"}}),h.isMDXComponent=!0}}]);
//# sourceMappingURL=component---docs-collection-mdx-8a595b98f4faf626edc8.js.map